This appendix presents the complete syntax of Typed Lua.
\allowdisplaybreaks
\begin{align*}
\textit{chunk} ::= & \;\; \textit{block}\\
\textit{block} ::= & \;\; \{\textit{stat}\} \; [\textit{retstat}]\\
\textit{stat} ::= & \;\; \texttt{`;'}\\
& | \; \textit{varlist} \; \texttt{`='} \; \textit{explist}\\
& | \; \textit{functioncall}\\
& | \; \textit{label}\\
& | \; \textbf{break}\\ 
& | \; \textbf{goto} \; \textit{Name}\\
& | \; \textbf{do} \; \textit{block} \; \textbf{end}\\
& | \; \textbf{while} \; \textit{exp} \; \textbf{do} \; \textit{block} \; \textbf{end}\\
& | \; \textbf{repeat} \; \textit{block} \; \textbf{until} \; \textit{exp}\\
& | \; \textbf{if} \; \textit{exp} \; \textbf{then} \; \textit{block} \;
  \{\textbf{elseif} \; \textit{exp} \; \textbf{then} \; \textit{block}\} \;
  [\textbf{else} \; \textit{block}] \; \textbf{end}\\ 
& | \; \textbf{for} \; \textit{Name} \; \texttt{`='} \; \textit{exp} \;
  \texttt{`,'} \; \textit{exp} \; [\texttt{`,'} \; \textit{exp}] \;
  \textbf{do} \; \textit{block} \; \textbf{end}\\
& | \; \textbf{for} \; \textit{namelist} \; \textbf{in} \; \textit{explist} \;
  \textbf{do} \; \textit{block} \; \textbf{end}\\
& | \; [\textbf{const}] \; \textbf{function} \; \textit{funcname} \; \textit{funcbody}\\
& | \; \textbf{local} \; \textbf{function} \; \textit{Name} \; \textit{funcbody}\\
& | \; \textbf{local} \; \textit{namelist} \; [\texttt{`='} \; \textit{explist}]\\
& | \; [\textbf{local}] \; \textbf{typealias} \; \textit{Name} \; \texttt{`='} \; \textit{type}\\
& | \; [\textbf{local}] \; \textbf{interface} \; \textit{typedec}\\
\textit{retstat} ::= & \;\; \textbf{return} \; [\textit{explist}] \; [\texttt{`;'}]\\
\textit{label} ::= & \;\; \texttt{`::'} \; \textit{Name} \; \texttt{`::'}\\
\textit{funcname} ::= & \;\; \textit{Name} \; \{\texttt{`.'} \; \textit{Name}\} \; [\texttt{`:'} \; \textit{Name}]\\
\textit{varlist} ::= & \;\; [\textbf{const}] \; \textit{var} \;
  \{\texttt{`,'} \; [\textbf{const}] \; \textit{var}\}\\
\textit{var} ::= & \;\; \textit{Name} \; | \;
  \textit{prefixexp} \; \texttt{`['} \; \textit{exp} \; \texttt{`]'} \; | \;
  \textit{prefixexp} \; \texttt{`.'} \; \textit{Name}\\
\textit{namelist} ::= & \;\; \textit{Name} \; [\texttt{`:'} \; \textit{type}] \;
  \{\texttt{`,'} \; \textit{Name} \; [\texttt{`:'} \; \textit{type}]\}\\
\textit{explist} ::= & \;\; \textit{exp} \; \{\texttt{`,'} \; \textit{exp}\}\\
\textit{exp} ::= & \;\; \textbf{nil} \; | \;
  \textbf{false} \; | \;
  \textbf{true} \; | \;
  \textit{Number} \; | \;
  \textit{String} \; | \;
  \texttt{`...'} \; | \;
  \textit{functiondef}\\
& | \; \textit{prefixexp} \; | \;
  \textit{tableconstructor} \; | \;
  \textit{exp} \; \textit{binop} \; \textit{exp} \; | \;
  \textit{unop} \; \textit{exp}\\
\textit{prefixexp} ::= & \;\; \textit{var} \; | \;
  \textit{functioncall} \; | \;
  \texttt{`('} \; \textit{exp} \; \texttt{`)'}\\
\textit{functioncall} ::= & \;\; \textit{prefixexp} \; \textit{args} \; | \;
  \textit{prefixexp} \; \texttt{`:'} \; \textit{Name} \; \textit{args}\\
\textit{args} ::= & \;\; \texttt{`('} \; [\textit{explist}] \; \texttt{`)'} \; | \;
  \textit{tableconstructor} \; | \;
  \textit{String}\\
\textit{functiondef} ::= & \;\; \textbf{function} \; \textit{funcbody}\\
\textit{funcbody} ::= & \;\; \texttt{`('} \; [\textit{parlist}] \; \texttt{`)'} \;
  [\texttt{`:'} \; \textit{rettype}] \; \textit{block} \; \textbf{end}\\
\textit{parlist} ::= & \;\; \textit{namelist} \; [\texttt{`,'} \; \texttt{`...'} \;
  [\texttt{`:'} \; \textit{type}]] \; | \;
  \texttt{`...'} \; [\texttt{`:'} \; \textit{type}]\\
\textit{tableconstructor} ::= & \;\; \texttt{`\{'} \; [\textit{fieldlist}] \; \texttt{`\}'}\\
\textit{fieldlist} ::= & \;\; [\textbf{const}] \; \textit{field} \;
  \{\textit{fieldsep} \; [\textbf{const}] \; \textit{field}\} \; [\textit{fieldsep}]\\
\textit{field} ::= & \;\; \texttt{`['} \; \textit{exp} \; \texttt{`]'} \; \texttt{`='} \; \textit{exp} \; | \;
  \textit{Name} \; \texttt{`='} \; \textit{exp} \; | \;
  \textit{exp}\\
\textit{fieldsep} ::= & \;\; \texttt{`,'} \; | \; \texttt{`;'}\\
\textit{binop} ::= & \;\; \texttt{`+'} \; | \; \texttt{`-'} \; | \; \texttt{`*'} \; | \; \texttt{`/'} \; | \;
  \texttt{`//'} \; | \; \texttt{`\textasciicircum'} \; | \; \texttt{`\%'}\\
& | \; \texttt{`\&'} \; | \; \texttt{`\textasciitilde'} \; | \; \texttt{`|'} \; | \;
  \texttt{`>>'} \; | \; \texttt{`<<'} \; | \; \texttt{`..'}\\
& | \; \texttt{`<'} \; | \; \texttt{`<='} \; | \; \texttt{`>'} \; | \; \texttt{`>='} \; | \;
  \texttt{`=='} \; | \; \texttt{`\textasciitilde='}\\
& | \; \textbf{and} \; | \; \textbf{or}\\
\textit{unop} ::= & \;\; \texttt{`-'} \; | \; \textbf{not} \; | \; \texttt{`\#'} \; | \; \texttt{`\textasciitilde'}\\
\textit{typedec} ::= & \;\; \textit{Name} \; \{\textit{decitem}\} \; \textbf{end}\\
\textit{decitem} ::= & \;\; \textit{idlist} \; \texttt{`:'} \; \textit{idtype}\\
\textit{idtype} ::= & \;\; \textit{type} \; | \; \textit{methodtype}\\
\textit{idlist} ::= & \;\; \textit{id} \; \{\texttt{`,'} \; \textit{id}\}\\
\textit{id} ::= & \;\; [\textbf{const}] \; \textit{Name}\\
\textit{type} ::= & \;\; \textit{primarytype} \; [\texttt{`?'}]\\
\textit{primarytype} ::= & \;\; \textit{literaltype} \; | \;
  \textit{basetype} \; | \;
  \textbf{nil} \; | \;
  \textbf{value} \; | \;
  \textbf{any} \; | \;
  \textbf{self} \; | \;
  \textit{Name}\\
& | \; \textit{functiontype} \; | \;
  \textit{tabletype} \; | \;
  \textit{primarytype} \; \texttt{`|'} \; \textit{primarytype}\\
\textit{literaltype} ::= & \;\; \textbf{false} \; | \;
  \textbf{true} \; | \;
  \textit{Int} \; | \;
  \textit{Float} \; | \;
  \textit{String}\\
\textit{basetype} ::= & \;\; \textbf{boolean} \; | \;
  \textbf{integer} \; | \;
  \textbf{number} \; | \;
  \textbf{string}\\
\textit{functiontype} ::= & \;\; \textit{tupletype} \; \texttt{`->'} \; \textit{rettype}\\
\textit{tupletype} ::= & \;\; \texttt{`('} \; [typelist] \; \texttt{`)'}\\
\textit{typelist} ::= & \;\; \textit{type} \; \{\texttt{`,'} \; \textit{type}\} \; [\texttt{`*'}]\\
\textit{rettype} ::= & \;\; \textit{type} \; | \;
  \textit{uniontuple} \; [\texttt{`?'}]\\
\textit{uniontuple} ::= & \;\; \textit{tupletype} \; | \;
  \textit{uniontuple} \; \texttt{`|'} \; \textit{uniontuple}\\
\textit{tabletype} ::= & \;\; \texttt{`\{'} \; [\textit{tabletypebody}] \; \texttt{`\}'}\\
\textit{tabletypebody} ::= & \;\; \textit{maptype} \; | \;
  \textit{recordtype}\\
\textit{maptype} ::= & \;\; [\textit{keytype} \; \texttt{`:'}] \; \textit{type}\\
\textit{keytype} ::= & \;\; \textit{basetype} \; | \;
  \textbf{value}\\
\textit{recordtype} ::= & \;\; \textit{recordfield} \; \{\texttt{`,'} \; \textit{recordfield}\} \; [\texttt{`,'} \; \textit{type}]\\
\textit{recordfield} ::= & \;\; [\textbf{const}] \; \textit{literaltype} \; \texttt{`:'} \; \textit{type}\\
\textit{methodtype} ::= & \;\; \textit{tupletype} \; \texttt{`=>'} \; \textit{rettype}
\end{align*}
